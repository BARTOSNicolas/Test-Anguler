<div class="container">
    <h2 class="text-2xl mb-8">Liste des tâches</h2>
    <form (ngSubmit)="addTask()" class="flex gap-4 w-full mb-8">
        <input
                [(ngModel)]="title"
                name="task"
                type="text"
                placeholder="Nouvelle tâche"
                class="input w-full"
        />
        <button type="submit" [disabled]="title.length < 3" class="btn btn-primary">Ajouter</button>
    </form>
    <ul class="list-group">
        @for (task of tasks(); track task.id) {
            <li class="list-group-item flex justify-between items-center">
                <div>
                    <div class="flex items-center gap-4">
                        <input type="checkbox" [checked]="task.completed" class="toggle toggle-success" (input)="toggleTask(task)" />
                        <p class="text-xl">{{ task.title }}</p>
                    </div>
                    <p class="text-xs italic text-base-content/25"> crée le : {{ task.createdAt | date: 'dd/MM/yyyy HH:mm' }}</p>
                </div>
                <div class="flex gap-16 items-center">
                    @if (task.completed && task.updatedAt) {
                    <div class="badge badge-success">terminée le {{ task.updatedAt | date: 'dd/MM/yyyy HH:mm' }}</div>
                    } @else {
                        <div class="badge badge-warning">pas terminée</div>
                    }
                    <button (click)="deleteTask(task)" class="btn btn-sm btn-error text-white">X</button>
                </div>
            </li>
        }
    </ul>
</div>

